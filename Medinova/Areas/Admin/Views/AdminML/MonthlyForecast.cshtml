@model List<Medinova.ML.Models.DoctorMonthlyForecastDto>

<canvas id="doctorBarChart" style="height:240px;"></canvas>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    const barData = @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(Model));

    const doctorLabels = barData.map(x => x.FullName);
    const predictionValues = barData.map(x => x.PredictedAppointmentCount);

    const colors = [
        '#0d6efd', 
        '#198754', 
        '#ffc107', 
        '#dc3545', 
        '#6f42c1', 
        '#20c997', 
        '#fd7e14', 
        '#0dcaf0'  
    ];

    new Chart(document.getElementById('doctorBarChart'), {
        type: 'bar',
        data: {
            labels: doctorLabels,
            datasets: [{
                label: 'Önümüzdeki Ay ML Tahmini',
                data: predictionValues,
                backgroundColor: doctorLabels.map((_, i) => colors[i % colors.length]),
                borderRadius: 8
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { display: true }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    ticks: { precision: 0 }
                }
            }
        }
    });
</script>
